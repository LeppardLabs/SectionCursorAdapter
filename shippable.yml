language: java

jdk:
    - oraclejdk7

build:

    pre_ci:
      # https://hub.docker.com/r/minceman/android/
        - docker pull minceman/android:latest

    pre_ci_boot:
        image_name: minceman/android
        image_tag: latest
        pull: false
        options: "-e HOME=/root"

    ci:
        - mkdir -p shippable/testresults
        - chmod +x gradlew
        - ./gradlew testDebug

    on_success:
        - cp -r sample/build/test-results/* shippable/testresults/

    on_failure:
        - cp -r sample/build/test-results/* shippable/testresults/

    cache: true
        cache_dir_list:
            - $SHIPPABLE_BUILD_DIR/.gradle
